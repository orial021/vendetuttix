
{% extends 'base.html' %}

{% block title %}Vendetuttix{% endblock %}

{% block content %}
<main>
<section class="bg-gray-200 p-4 py-12 md:py-24">
  <div class="container mx-auto grid md:grid-cols-2 gap-20">
    <div style="display: flex; flex-direction: column; align-items: flex-start;">
      <div id="banner-container1" style="margin-top: 100px;"></div>
    </div>
    <div id="banner-container2"></div>
  </div>
</section>


<section class="py-5 md:py-12 flex justify-center items-center bg-light">
  <div class="container flex flex-col items-center min-h-[100vh]">
    <p class="text-4xl md:text-6xl font-bold mb-5" style="font-size: 5rem;">Productos destacados</p>
    <div class="product-columns" id="product-list"></div>
  </div>
</section>


    


          <script>
            async function fetchAndDisplayBanners() {
              try {
                const response = await fetch("/banner/show/1");
                const data = await response.json();
            
                // Banner 1 (título y contenido)
                const bannerContainer1 = document.getElementById("banner-container1");
                const bannerHtml1 = `
                  <h1 class="text-5xl md:text-5xl font-bold mb-4">${data.title}</h1>
                  <p class="text-4xl text-muted-foreground mb-8">${data.content}</p>
                `;
                bannerContainer1.innerHTML = bannerHtml1;
            
                // Banner 2 (imagen)
                const bannerContainer2 = document.getElementById("banner-container2");
                const bannerHtml2 = `
                  <img
                    src="${data.image_url}"
                    alt="${data.title}"
                    width="800"
                    height="600"
                    class="rounded-lg object-cover"
                    style="aspect-ratio: 800 / 600; object-fit: cover;"
                  >
                `;
                bannerContainer2.innerHTML = bannerHtml2;
              } catch (error) {
                console.error("Error al obtener los banners:", error);
              }
            }
            
            // Llama a la función para mostrar los banners
            fetchAndDisplayBanners();
            

            //productos destacados
            async function fetchAndDisplayProduct() {
              const response = await fetch("/product/showFeatured/true?offset=0&limit=4&order_by=updated_at");
              const products = await response.json();
              const productContainer = document.getElementById("product-list");
            
              products.forEach(product => {
                const item = document.createElement("div");
                item.classList.add("product-item");
                item.innerHTML = `
                <div class="products bg-background rounded-lg shadow-sm overflow-hidden">
                  <img 
                    src="${product.imagen_url}" 
                    alt="${product.title}" 
                    style="aspect-ratio: 400 / 300; object-fit: cover;">
                  <h1 class="text-5xl md:text-5xl font-bold mb-4">${product.name}</h1>
                  <p class="text-4xl text-muted-foreground mb-8">${product.short_description}</p>
                  <h2 class="text-2xl item-center md:text-5xl font-bold mb-4">${product.price}</h2>
                  </div>
                `;
                productContainer.appendChild(item);
              });
            }
            fetchAndDisplayProduct();
            
                </script>
          {% endblock %}



          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
            <div class="bg-background rounded-lg shadow-sm overflow-hidden" id="Featured-product-container1"></div>
            <div class="bg-background rounded-lg shadow-sm overflow-hidden" id="Featured-product-container2"></div>
            <div class="bg-background rounded-lg shadow-sm overflow-hidden" id="Featured-product-container3"></div>
            <div class="bg-background rounded-lg shadow-sm overflow-hidden" id="Featured-product-container4"></div>
        </div>


// Bloque de codigo para el producto 1
function fetchAndDisplayProduct(productId, containerId) {
  const productContainer = document.getElementById(containerId);

  fetch(`/product/show/${productId}`)
      .then(response => response.json())
      .then(data => {
          const productHtml = `
              <img
                  src="${data.imagen_url}"
                  alt="${data.title}"
                  style="aspect-ratio: 400 / 300; object-fit: cover;"
              />
              <h1 class="text-5xl md:text-5xl font-bold mb-4">${data.name}</h1>
              <h2 class="text-2xl md:text-5xl font-bold mb-4">${data.price}</h2>
              <p class="text-4xl text-muted-foreground mb-8">${data.short_description}</p>
          `;

          productContainer.innerHTML = productHtml;
      })
      .catch(error => {
          console.error("Error al obtener los datos del producto:", error);
      });
}
fetchAndDisplayProduct(1, "Featured-product-container1");
fetchAndDisplayProduct(2, "Featured-product-container2");
fetchAndDisplayProduct(3, "Featured-product-container3");
fetchAndDisplayProduct(4, "Featured-product-container4");





















 